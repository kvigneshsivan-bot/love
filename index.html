<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Affer only Today</title>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:Poppins, sans-serif;
}
body{ overflow:hidden; }

/* ===== TEXT ANIMATION ===== */
@keyframes gradientMove {
    0% { background-position:0% 50%; }
    50% { background-position:100% 50%; }
    100% { background-position:0% 50%; }
}

.animated-text{
    background:linear-gradient(45deg,#ff1744,#ff6600,#ffcc00,#ff1744);
    background-size:300% 300%;
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    animation:gradientMove 4s ease infinite;
}

/* ===== PAGE 1 ===== */
#page1{
    height:100vh;
    position:relative;
    background:black;
}

canvas{
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    z-index:1;
}

.container{
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    position:relative;
    z-index:2;
}

.box{
    background:rgba(255,255,255,0.12);
    padding:40px;
    border-radius:25px;
    text-align:center;
    box-shadow:0 0 40px rgba(255,255,255,0.3);
    backdrop-filter:blur(6px);
}

.box h1{
    font-size:42px;
    color:white;
    margin-bottom:20px;
    text-shadow:0 0 20px pink;
}

.angel-img{
    width:160px;
    border-radius:50%;
    margin-bottom:20px;
    box-shadow:0 0 25px white;
}

.move-btn{
    padding:12px 30px;
    border:none;
    border-radius:30px;
    background:linear-gradient(45deg,#ff6ec7,#ffb347);
    color:white;
    cursor:pointer;
    font-weight:bold;
}

/* ===== PAGE 2 ===== */
#page2{
    display:none;
    height:100vh;
    justify-content:center;
    align-items:center;
    background:linear-gradient(to bottom,#ff0066,#ff6600,#ffcc00);
}

.frame{
    background:white;
    padding:50px;
    border-radius:30px;
    text-align:center;
    width:420px;
    box-shadow:0 0 60px rgba(255,0,100,0.6);
}

.frame h1{
    font-size:38px;
    margin-bottom:15px;
}

.frame h2{
    font-size:20px;
    margin-bottom:40px;
}

.button-area{
    position:relative;
    height:90px;
}

.yes-btn,.no-btn{
    width:130px;
    height:48px;
    border:none;
    border-radius:30px;
    font-weight:bold;
    cursor:pointer;
    position:absolute;
}

.yes-btn{
    background:linear-gradient(45deg,#fff200,#ffd600);
    left:20px;
    top:20px;
}

.no-btn{
    background:linear-gradient(45deg,#ff1744,#d50000);
    color:white;
    right:20px;
    top:20px;
}

/* ===== PAGE 3 ===== */
#page3{
    display:none;
    height:100vh;
    background:linear-gradient(to bottom,#ff0066,#ff6600,#ffcc00);
    position:relative;
}

.third-box{
    background:white;
    padding:40px;
    border-radius:25px;
    text-align:center;
    width:380px;
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
}

#finalLove{
    position:absolute;
    bottom:20%;
    left:50%;
    transform:translateX(-50%);
    font-size:60px;
    font-weight:bold;
    display:none;
}

/* ===== PAGE 4 ===== */
#page4{
    display:none;
    height:100vh;
    background:linear-gradient(to bottom,#ff0066,#ff6600,#ffcc00);
    position:relative;
    justify-content:center;
    align-items:center;
}

#prankText{
    font-size:80px;
    font-weight:bold;
    color:white;
    text-shadow:0 0 30px rgba(0,0,0,0.5);
    opacity:0;
    animation:prankFadeIn 0.8s ease-in-out forwards;
}

@keyframes prankFadeIn{
    0%{
        opacity:0;
        transform:scale(0.5);
    }
    100%{
        opacity:1;
        transform:scale(1);
    }
}

/* enhanced prank animations */
@keyframes flyIn {
    0%{ transform:translateY(-200px) scale(0.6) rotate(-10deg); opacity:0; }
    60%{ transform:translateY(20px) scale(1.05) rotate(6deg); opacity:1; }
    100%{ transform:translateY(0) scale(1) rotate(0); opacity:1; }
}

@keyframes floatAround{
    0%{ transform:translateY(0) translateX(0); }
    50%{ transform:translateY(-12px) translateX(6px); }
    100%{ transform:translateY(0) translateX(0); }
}

.prank-emoji{
    position:absolute;
    font-size:36px;
    pointer-events:none;
    opacity:0.95;
    will-change:transform, opacity;
}

@keyframes emojiFlyUp{
    0%{ transform:translateY(0) scale(0.8); opacity:1; }
    100%{ transform:translateY(-120vh) scale(1.2); opacity:0; }
}

/* ===== HEART FLOAT ===== */
@keyframes floatUp{
    0%{ transform:translateY(0); opacity:1;}
    100%{ transform:translateY(-600px); opacity:0;}
}

.heart{
    position:absolute;
    color:white;
    font-size:20px;
    animation:floatUp 5s linear infinite;
}

/* Play button when browser blocks autoplay */
.play-btn{
    position:fixed;
    left:50%;
    bottom:24px;
    transform:translateX(-50%);
    padding:10px 18px;
    border-radius:24px;
    border:none;
    background:linear-gradient(45deg,#ff6ec7,#ffb347);
    color:#111;
    font-weight:bold;
    box-shadow:0 6px 20px rgba(0,0,0,0.25);
    z-index:9999;
    cursor:pointer;
}

</style>
</head>

<body>

<!-- PAGE 1 -->
<div id="page1">
<canvas id="stars"></canvas>
<div class="container">
    <div class="box">
        <h1>Hii Angel üíñ</h1>
        <img src="https://i.etsystatic.com/47673575/r/il/416a1e/5607303570/il_300x300.5607303570_32mf.jpg" class="angel-img">
        <br><br>
        <button class="move-btn" onclick="goNext()">Move üíï</button>
    </div>
</div>
</div>

<!-- PAGE 2 -->
<div id="page2">
<div class="frame">
    <h1 class="animated-text">Love is not More beauty ‚òÄÔ∏è</h1>
    <h2 class="animated-text">I want you in my life as my lifelong friend for ever üíõ</h2>
    <div class="button-area" id="buttonArea">
        <button class="yes-btn" id="yesBtn">Yes üíõ</button>
        <button class="no-btn" onclick="goThird()">No ‚ù§Ô∏è</button>
    </div>
</div>
</div>

<!-- PAGE 3 -->
<div id="page3">

<div class="third-box">
    <h1 class="animated-text">Even if you say No üíú</h1>
    <h2 class="animated-text">You are still special ‚ú®</h2>
</div>

<div id="finalLove" class="animated-text">I LOVE YOU ‚ù§Ô∏è</div>

<audio id="bgSong" src="https://image2url.com/r2/default/audio/1771145165663-d078a638-f607-45dd-b4f0-36ac4b4b2800.mp3"></audio>
<button id="playFallback" class="play-btn" style="display:none;">Play Song ‚ñ∂Ô∏è</button>

</div>

<!-- PAGE 4 -->
<div id="page4">
<div id="prankText">PRANK üòú</div>
</div>

<script>

/* PAGE SWITCH */
/* PAGE SWITCH */
function goNext(){
    page1.style.display = "none";
    page2.style.display = "flex";
    if (heartsIntervalId) { clearInterval(heartsIntervalId); heartsIntervalId = null; }
    heartsIntervalId = startHearts('page2');
}


// Define page element references used throughout the script
const page1 = document.getElementById('page1');
const page2 = document.getElementById('page2');
const page3 = document.getElementById('page3');
const page4 = document.getElementById('page4');

/* YES BUTTON MOVE */
const yesBtn=document.getElementById("yesBtn");
const buttonArea=document.getElementById("buttonArea");

yesBtn.addEventListener("mouseenter",()=>{
const maxX=buttonArea.clientWidth-yesBtn.clientWidth;
const maxY=buttonArea.clientHeight-yesBtn.clientHeight;
yesBtn.style.left=Math.random()*maxX+"px";
yesBtn.style.top=Math.random()*maxY+"px";
});

/* THIRD PAGE + SONG */
const bgSong=document.getElementById("bgSong");

// timers/interval ids so we can clear them if user navigates again
let heartsIntervalId = null;
let finalLoveTimerId = null;
let redirectTimerId = null;

function goThird(){
    // clear any previous timers/intervals
    if (heartsIntervalId) { clearInterval(heartsIntervalId); heartsIntervalId = null; }
    if (finalLoveTimerId) { clearTimeout(finalLoveTimerId); finalLoveTimerId = null; }
    if (redirectTimerId) { clearTimeout(redirectTimerId); redirectTimerId = null; }

    page2.style.display = "none";
    page3.style.display = "block";
    document.getElementById("finalLove").style.display = "none";

    // start hearts on page3
    if (heartsIntervalId) { clearInterval(heartsIntervalId); heartsIntervalId = null; }
    heartsIntervalId = startHearts('page3');

    bgSong.currentTime = 0;
    bgSong.loop = false; // ensure it plays only once

    // Do not autoplay here. Show "I LOVE YOU" after 5s and start playback then.
    finalLoveTimerId = setTimeout(()=>{
        document.getElementById("finalLove").style.display = "block";

        // attempt playback when the text appears
        const playPromise = bgSong.play();
        if (playPromise !== undefined) {
            playPromise.then(()=>{
                document.getElementById("playFallback").style.display = "none";
                // start 2-minute redirect timer from actual playback
                if (redirectTimerId) { clearTimeout(redirectTimerId); }
                redirectTimerId = setTimeout(handleRedirectToPage4, 120000);
            }).catch(()=>{
                // autoplay blocked ‚Äî show fallback button; redirect will start when user plays
                document.getElementById("playFallback").style.display = "block";
            });
        } else {
            // older browsers: start timer immediately
            redirectTimerId = setTimeout(handleRedirectToPage4, 120000);
        }
    }, 5000);
}

// Fallback play button handler (shown if autoplay blocked)
document.getElementById("playFallback").addEventListener("click", ()=>{
    bgSong.play().then(()=>{
        document.getElementById("playFallback").style.display = "none";
        // start redirect timer if not already started
        if (!redirectTimerId) {
            redirectTimerId = setTimeout(handleRedirectToPage4, 120000);
        }
    }).catch(()=>{
        // still blocked ‚Äî keep button visible
        document.getElementById("playFallback").style.display = "block";
    });
});

// If the song ends naturally before the 2-minute timer, immediately go to page 4
bgSong.addEventListener('ended', ()=>{
    // clear the 2-minute redirect timer if set
    if (redirectTimerId) { clearTimeout(redirectTimerId); redirectTimerId = null; }
    if (finalLoveTimerId) { clearTimeout(finalLoveTimerId); finalLoveTimerId = null; }
    if (heartsIntervalId) { clearInterval(heartsIntervalId); heartsIntervalId = null; }
    handleRedirectToPage4();
});

function handleRedirectToPage4(){
    // clear timers/intervals
    if (redirectTimerId) { clearTimeout(redirectTimerId); redirectTimerId = null; }
    if (finalLoveTimerId) { clearTimeout(finalLoveTimerId); finalLoveTimerId = null; }
    if (heartsIntervalId) { clearInterval(heartsIntervalId); heartsIntervalId = null; }

    page3.style.display = 'none';
    page4.style.display = 'flex';
    setTimeout(()=>{ showPrankEffects(); }, 1000);
}

// Show the prank text with enhanced flying effects and spawn emojis
function showPrankEffects(){
    const pt = document.getElementById('prankText');
    pt.style.animation = 'none';
    void pt.offsetWidth;
    pt.style.animation = 'flyIn 0.9s ease-out forwards, floatAround 2s ease-in-out 0.9s infinite';

    // spawn more flying emojis across the full width of the page
    const emojis = ['üòú','üòÇ','üéâ','üí•','ü§™','‚ú®','‚ù§Ô∏è','üòç','üéà','üî•'];
    const count = 24;
    for(let i=0;i<count;i++){
        const e = document.createElement('div');
        e.className = 'prank-emoji';
        e.textContent = emojis[Math.floor(Math.random()*emojis.length)];

        // random horizontal start across the full width
        const leftOffset = Math.random()*100; // percent 0 - 100
        e.style.left = leftOffset + '%';

        // random vertical start near bottom so they float up
        const bottomOffset = 5 + Math.random()*60; // percent
        e.style.bottom = bottomOffset + '%';

        e.style.fontSize = (20 + Math.random()*50) + 'px';

        const dur = 2500 + Math.random()*3500;
        e.style.animation = `emojiFlyUp ${dur}ms linear forwards`;
        e.style.animationDelay = (Math.random()*800) + 'ms';

        page4.appendChild(e);
        e.addEventListener('animationend', ()=> e.remove());
    }
}

/* STAR ANIMATION */
const canvas=document.getElementById("stars");
const ctx=canvas.getContext("2d");

canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

let stars=[];
for(let i=0;i<200;i++){
stars.push({
x:Math.random()*canvas.width,
y:Math.random()*canvas.height,
radius:Math.random()*2
});
}

function drawStars(){
ctx.clearRect(0,0,canvas.width,canvas.height);
ctx.fillStyle="white";
stars.forEach(star=>{
ctx.beginPath();
ctx.arc(star.x,star.y,star.radius,0,Math.PI*2);
ctx.fill();
});
requestAnimationFrame(drawStars);
}
drawStars();

/* HEART FLOAT */
function startHearts(targetId = 'page3'){
    const container = document.getElementById(targetId) || document.body;
    const id = setInterval(()=>{
        let heart=document.createElement("div");
        heart.className="heart";
        heart.innerHTML="‚ù§Ô∏è";
        heart.style.left=Math.random()*window.innerWidth+"px";
        heart.style.bottom="0px";
        container.appendChild(heart);

        setTimeout(()=>{heart.remove();},5000);
    },500);
    return id;
}

</script>

</body>
</html>

